function Player(e){this.options=e,this.init()}!function(e,t){var a=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(a),a.styleSheet)a.styleSheet.disabled||(a.styleSheet.cssText=t);else try{a.innerHTML=t}catch(r){a.innerText=t}}(document,"@-webkit-keyframes ge-roll{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes ge-roll{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.ge-player{background:#fff;border:1px solid;position:relative;max-width:400px}.ge-player .fa{cursor:pointer}.ge-player .fa.active,.ge-player .fa:hover{color:#1e90ff}.ge-player .image{position:absolute;width:130px;height:130px;left:10px;top:10px}.ge-player .image.ge-roll{-webkit-animation:ge-roll 5s linear infinite;animation:ge-roll 5s linear infinite}.ge-player .image img{width:100%;height:100%;border-radius:50%}.ge-player .buttons{position:absolute;top:10px;right:10px}.ge-player .control{padding:30px 10px 10px 150px;height:150px;text-align:center}.ge-player .control .fa{margin:10px;font-size:30px}.ge-player .progress{padding:1em}.ge-player .progress .wrap{position:relative}.ge-player .progress .bar{border:1px solid gray;height:1px}.ge-player .progress .cursor{cursor:pointer;position:absolute;background:gray;border-radius:50%;width:10px;height:10px;top:-4px;margin-left:-5px;left:0}.ge-player .progress .time{position:absolute;right:0;top:-2em}.ge-player .playlist{max-height:200px;border-top:1px dashed gray;border-radius:.5em;padding:.5em 1em;overflow-y:auto}.ge-player .playlist.hide{display:none}.ge-player .playlist>div{white-space:nowrap;text-overflow:ellipsis;color:#1a1a1a;cursor:pointer}.ge-player .playlist>div.active{color:#1e90ff;font-weight:700}.ge-player .playlist>div:hover{color:orange;font-weight:700}"),Player.prototype={init:function(){var e=this,t=e.options.container;t.classList.add("ge-player"),t.innerHTML='<div class="image"></div><div class="buttons"><span class="fa fa-list"></span></div><div class="control"><div class="title"></div><span data="prev" class="fa fa-step-backward"></span><span data="play" class="fa fa-play"></span><span data="next" class="fa fa-step-forward"></span></div><div class=progress><div class="wrap"><div class="bar"></div><div class="cursor"></div><div class="time"></div></div></div><div class="playlist hide"></div>',e.image=t.querySelector(".image"),e.title=t.querySelector(".title"),e.btprev=t.querySelector("*[data=prev]"),e.btplay=t.querySelector("*[data=play]"),e.btnext=t.querySelector("*[data=next]"),e.btplaylist=t.querySelector(".fa-list"),e.playlist=t.querySelector(".playlist"),e.prcur=t.querySelector(".cursor"),e.prtime=t.querySelector(".time"),e.audio=new Audio,e.setSongs([]),e.bindEvents()},bindEvents:function(){var e=this;e.btplaylist.addEventListener("click",function(t){this.classList.toggle("active"),e.playlist.classList.toggle("hide")},!1),e.btprev.addEventListener("click",function(t){e.play(e.previous())},!1),e.btnext.addEventListener("click",function(t){e.play(e.next())},!1),e.btplay.addEventListener("click",function(t){e.audio.paused?e.audio.play():e.audio.pause()},!1),e.audio.addEventListener("ended",function(t){e.play(e.next())},!1),e.audio.addEventListener("timeupdate",function(t){var a=this.currentTime,r=e.duration||this.duration;e.prcur.style.left=r?a/r*100+"%":0,e.prtime.innerHTML=e.timestr(a)+"/"+e.timestr(r)},!1);var t=function(t){var a=["add","remove"];"pause"==t.type&&a.reverse();var r=e.btplay.classList;r[a[1]]("fa-play"),r[a[0]]("fa-pause"),e.image.classList[a[0]]("ge-roll")};e.audio.addEventListener("play",t,!1),e.audio.addEventListener("pause",t,!1),e.playlist.addEventListener("click",function(t){var a=Array.prototype.indexOf.call(this.childNodes,t.target);a>=0&&e.play(a)},!1)},safeHTML:function(e){return e.replace(/[&"<]/g,function(e){return{"&":"&amp;",'"':"&quot;","<":"&lt;"}[e]})},setSongs:function(e){var t=this,a=[];t.songs=e,t.songs.forEach(function(e){var r=t.safeHTML(e.name);a.push('<div title="'+r+'">'+r+"</div>")}),t.playlist.innerHTML=a.join(""),t.current=-1,t.duration=0,t.play(0)},play:function(e){var t=this,a=null;if(e>=0&&e<t.songs.length){if(t.current==e)t.audio.currentTime=0;else{var r=t.playlist.childNodes,i=r[t.current];i&&i.classList.remove("active"),t.current=e,r[t.current].classList.add("active");var s=t.songs[t.current];t.title.innerHTML=t.safeHTML(s.name),t.audio.src=s.url,t.duration=s.duration?s.duration/1e3:null,a=s.image}t.prtime.innerHTML="",t.prcur.style.left=0,t.audio.play()}a||(a=t.options.image),a&&(t.image.innerHTML='<img src="'+t.safeHTML(a)+'">')},previous:function(){return(this.current-1)%this.songs.length},next:function(){return(this.current+1)%this.songs.length},timestr:function(e){if(isNaN(e))return"??:??";var t=Math.floor(e/60);return e=Math.floor(e)%60,10>e&&(e="0"+e),10>t&&(t="0"+t),t+":"+e}};