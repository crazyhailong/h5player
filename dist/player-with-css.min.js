!function(e,t){var a=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(a),a.styleSheet)a.styleSheet.disabled||(a.styleSheet.cssText=t);else try{a.innerHTML=t}catch(i){a.innerText=t}}(document,"@-webkit-keyframes ge-roll{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes ge-roll{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.ge-player{background:#fff;box-shadow:0 0 10px gray;border-radius:3px;position:relative;max-width:400px}.ge-player i{cursor:pointer}.ge-player i.active,.ge-player i:hover{color:#1e90ff}.ge-player .image{position:absolute;width:130px;height:130px;left:10px;top:10px;-webkit-animation:ge-roll 8s linear infinite;animation:ge-roll 8s linear infinite;-webkit-animation-play-state:paused;animation-play-state:paused}.ge-player .image img{width:100%;height:100%;border-radius:50%}.ge-player .ge-roll{-webkit-animation-play-state:running;animation-play-state:running}.ge-player .buttons{position:absolute;top:10px;right:10px}.ge-player .control{padding:30px 10px 10px 150px;height:150px;text-align:center}.ge-player .control i{margin:10px;font-size:30px}.ge-player .progress{padding:1em}.ge-player .progress .wrap{position:relative}.ge-player .progress .barwrap{padding:4px 0}.ge-player .progress .bar{height:2px;background:silver;position:relative}.ge-player .progress .played{position:absolute;top:0;height:2px;background:brown}.ge-player .progress .cursor{cursor:pointer;position:absolute;border:1px solid silver;background:#fff;border-radius:50%;width:10px;height:10px;top:0;margin-left:-5px}.ge-player .progress .time{position:absolute;right:0;top:-2em}.ge-player .playlist{max-height:200px;border-top:1px dashed gray;padding:.5em 1em;overflow-y:auto}.ge-player .playlist.hide{display:none}.ge-player .playlist>div{white-space:nowrap;text-overflow:ellipsis;color:#1a1a1a;cursor:pointer}.ge-player .playlist>div.active{color:#1e90ff;font-weight:700}.ge-player .playlist>div:hover{color:orange;font-weight:700}"),function(){function e(e){this.options=e,this.init()}var t;"ontouchstart"in window?(t=function(e){var t=this;t.parent=e,t.last=null,t.touches={},t.data=[],t.parent.addEventListener("touchstart",t.touch(),!1),t.parent.addEventListener("touchmove",t.touch(),!1),t.parent.addEventListener("touchend",t.touch(),!1)},t.prototype={threshold:5,findItem:function(e){var t,a,i=this.data;for(t=0;t<i.length;t++)if(a=i[t],a.element===e)return a},addListener:function(e,t,a){var r=this,n=r.findItem(e);n?i=n.events[t]:(n={element:e,events:{}},r.data.push(n),i=null),i||(n.events[t]=i=[]),i.push(a)},removeListener:function(e,t,a){var i,r,n=this,o=n.findItem(e);o&&(i=o.events[t],i&&(r=i.indexOf(a),r>=0&&i.splice(r,1)))},ignore:function(){},call:function(e,t){for(var a=this,i=function(i){var r,o=null;for(r=0;r<a.data.length;r++)if(a.data[r].element===i){o=a.data[r];break}if(o){var s=o.events[e];s&&a.forEach(s,function(r){var o,s={type:e};for(o in t)s[o]=t[o];s.preventDefault=a.ignore,s.stopPropagation=n,r.call(i,s)})}},r=!1,n=function(){r=!0},o=t.target;o&&(i(o),!r&&o!==a.parent);)o=o.parentNode},forEach:function(e,t){Array.prototype.forEach.call(e,t)},touch:function(){var e=this;return function(t){t.preventDefault(),"touchstart"==t.type?e.forEach(t.changedTouches,function(t){e.touches[t.identifier]={evt:t},e.call("mousedown",t)}):"touchmove"==t.type?e.forEach(t.changedTouches,function(t){var a=e.touches[t.identifier],i=a.evt;a.moved=a.moved||Math.abs(t.clientX-i.clientX)>e.threshold||Math.abs(t.clientY-i.clientY)>e.threshold,a.moved&&(a.evt=t,e.call("mousemove",t))}):"touchend"==t.type&&e.forEach(t.changedTouches,function(t){e.call("mouseup",t);var a=e.touches[t.identifier];delete e.touches[t.identifier],a&&!a.moved&&e.call("click",t)})}}}):(t=function(e){},t.prototype={addListener:function(e,t,a){e.addEventListener(t,a,!1)},removeListener:function(e,t,a){e.removeEventListener(t,a,!1)}}),t.prototype.getPoint=function(e){if("offsetX"in e)return{x:e.offsetX,y:e.offsetY};var t=e.target.getBoundingClientRect(),a=document.documentElement,i=window;return{x:e.pageX-(t.left+i.pageXOffset-a.clientLeft),y:e.pageY-(t.top+i.pageYOffset-a.clientTop)}},e.prototype={_classes:{list:"fa fa-list",prev:"fa fa-step-backward",play:"fa fa-play",next:"fa fa-step-forward",pause:"fa fa-pause"},extend:function(e,t){for(var a in t)e[a]=t[a];return e},init:function(){var e=this,t=e.options.container;e.classes=e.extend({},e._classes),e.options.classes&&e.extend(e.classes,e.options.classes),t.classList.add("ge-player"),t.innerHTML='<div class="image"></div><div class="buttons"><i data="list" class="'+e.classes.list+'"></i></div><div class="control"><div class="title"></div><i data="prev" class="'+e.classes.prev+'"></i><i data="play" class="'+e.classes.play+'"></i><i data="next" class="'+e.classes.next+'"></i></div><div class=progress><div class="wrap"><div class="barwrap"><div class="bar"><div class="played"></div></div></div><div class="cursor"></div><div class="time"></div></div></div><div class="playlist hide"></div>',e.image=t.querySelector(".image"),e.title=t.querySelector(".title"),e.btprev=t.querySelector("*[data=prev]"),e.btplay=t.querySelector("*[data=play]"),e.btnext=t.querySelector("*[data=next]"),e.btplaylist=t.querySelector("*[data=list]"),e.playlist=t.querySelector(".playlist"),e.prwrap=t.querySelector(".barwrap"),e.prcur=t.querySelector(".cursor"),e.prtime=t.querySelector(".time"),e.brplayed=t.querySelector(".played"),e.audio=new Audio,e.options.image&&(e.image.innerHTML='<img src="'+e.safeHTML(e.options.image)+'">'),e.setSongs([]),e.bindEvents()},bindEvents:function(){var e=this,a=null,i=new t(e.options.container);i.addListener(e.btplaylist,"click",function(t){this.classList.toggle("active"),e.playlist.classList.toggle("hide")}),i.addListener(e.btprev,"click",function(t){e.play(e.previous())}),i.addListener(e.btnext,"click",function(t){e.play(e.next())}),i.addListener(e.btplay,"click",function(t){e.current<0?e.play(0):e.audio.paused?e.audio.play():e.audio.pause()}),e.audio.addEventListener("ended",function(t){e.play(e.next())},!1),e.audio.addEventListener("timeupdate",function(t){var i=this.currentTime,r=e.duration;if(r||(r=e.duration=this.duration),!a){var n=r?i/r*100+"%":0;e.prcur.style.left=n,e.brplayed.style.width=n}e.prtime.innerHTML=e.timestr(i)+"/"+e.timestr(r)},!1);var r=function(t){var a=["play","pause"];"pause"==t.type&&a.reverse();var i=e.btplay.classList;e.classes[a[0]].split(/\s+/).forEach(function(e){i.remove(e)}),e.classes[a[1]].split(/\s+/).forEach(function(e){i.add(e)}),e.image.classList["play"==t.type?"add":"remove"]("ge-roll")};e.audio.addEventListener("play",r,!1),e.audio.addEventListener("pause",r,!1),i.addListener(e.playlist,"click",function(t){var a=Array.prototype.indexOf.call(this.childNodes,t.target);a>=0&&e.play(a)});var n=function(t,a){var i=t/e.prwrap.offsetWidth;0>i?i=0:i>1&&(i=1),e.prcur.style.left=e.brplayed.style.width=100*i+"%",a&&(e.audio.currentTime=~~(i*e.duration))};i.addListener(e.prwrap,"click",function(e){e.preventDefault();var t=i.getPoint(e).x;n(t,!0)});var o=function(e){a&&(a.moved=!0,n(e.clientX-a.delta))},s=function(e){a&&(e.preventDefault(),a=null)},l=function(e){a&&(n(e.clientX-a.delta,!0),s(e))},p=function(t){t.preventDefault(),a={delta:t.clientX-e.brplayed.offsetWidth}};i.addListener(e.prcur,"mousedown",p),i.addListener(e.options.container,"mousemove",o),i.addListener(e.options.container,"mouseup",l),e.options.container.addEventListener("mouseleave",s,!1)},safeHTML:function(e){return e.replace(/[&"<]/g,function(e){return{"&":"&amp;",'"':"&quot;","<":"&lt;"}[e]})},setSongs:function(e){var t=this,a=[];t.songs=e,t.songs.forEach(function(e){var i=t.safeHTML(e.name);a.push('<div title="'+i+'">'+i+"</div>")}),t.playlist.innerHTML=a.join(""),t.current=-1,t.duration=0},play:function(e){var t=this;if(e>=0&&e<t.songs.length){if(t.current==e)t.audio.currentTime=0;else{var a=t.playlist.childNodes,i=a[t.current];i&&i.classList.remove("active"),t.current=e,a[t.current].classList.add("active");var r=t.songs[t.current];t.title.innerHTML=t.safeHTML(r.name),t.audio.src=r.url,t.duration=r.duration?r.duration/1e3:null;var n=r.image||t.options.image;n&&(t.image.innerHTML='<img src="'+t.safeHTML(n)+'">')}t.prtime.innerHTML="",t.prcur.style.left=0,t.brplayed.style.width=0,t.audio.play()}},previous:function(){return(this.current-1)%this.songs.length},next:function(){return(this.current+1)%this.songs.length},timestr:function(e){if(isNaN(e))return"??:??";var t=Math.floor(e/60);return e=Math.floor(e)%60,10>e&&(e="0"+e),10>t&&(t="0"+t),t+":"+e}},window.Player=e}.call({});