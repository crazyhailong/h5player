/**
 * H5Player - A simple but powerful HTML5 music player
 * @version v1.1.3
 * @license MIT
 * @author Gerald <gera2ld@163.com>
 */
!function(t,e){var i=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(i),i.styleSheet)i.styleSheet.disabled||(i.styleSheet.cssText=e);else try{i.innerHTML=e}catch(n){i.innerText=e}}(document,".h5p-playlist>div,.h5p-simple .h5p-info{white-space:nowrap;text-overflow:ellipsis}@-webkit-keyframes h5p-roll{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes h5p-roll{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.h5p{background:#fff;box-shadow:0 0 10px gray;position:relative}.h5p-button{cursor:pointer}.h5p-button.h5p-active,.h5p-button:hover{color:#1e90ff}.h5p-image{position:absolute}.h5p-image img{width:100%;height:100%}.h5p-title{font-weight:700}.h5p-bar{height:2px;background:silver;position:relative}.h5p-played{position:absolute;top:0;height:2px;background:brown}.h5p-playlist{display:none;max-height:200px;border-top:1px dashed gray;padding:.5em 1em;overflow-y:auto}.h5p-playlist>div{color:#1a1a1a;cursor:pointer}.h5p-playlist>div.h5p-active{color:#1e90ff;font-weight:700}.h5p-playlist>div:hover{color:orange;font-weight:700}.h5p-normal{border-radius:3px;max-width:400px;font-size:16px}.h5p-normal .h5p-image{width:130px;height:130px;left:10px;top:10px;-webkit-animation:h5p-roll 8s linear infinite;animation:h5p-roll 8s linear infinite;-webkit-animation-play-state:paused;animation-play-state:paused}.h5p-normal .h5p-image img{border-radius:50%}.h5p-normal .h5p-roll{-webkit-animation-play-state:running;animation-play-state:running}.h5p-normal .h5p-buttons{position:absolute;top:10px;right:10px;font-size:20px}.h5p-normal .h5p-buttons .h5p-button{margin-left:5px}.h5p-normal .h5p-info{padding:30px 10px 0 150px;text-align:center;height:70px}.h5p-normal .h5p-control{padding:0 10px 20px 150px;text-align:center}.h5p-normal .h5p-control .h5p-button{margin:10px;font-size:30px}.h5p-normal .h5p-artist{font-size:10px;height:20px}.h5p-normal .h5p-lyric{text-align:center;color:brown;font-size:12px;height:24px}.h5p-normal .h5p-progress{padding:5px 10px}.h5p-normal .h5p-wrap{position:relative;padding:4px 0}.h5p-normal .h5p-cursor{cursor:pointer;position:absolute;border:1px solid silver;background:#fff;border-radius:50%;width:10px;height:10px;top:0;margin-left:-5px}.h5p-normal .h5p-time{font-size:10px;position:absolute;right:0;top:-20px}.h5p-simple{border-radius:2px;max-width:300px;height:36px}.h5p-simple .h5p-image{width:34px;height:34px}.h5p-simple .h5p-buttons,.h5p-simple .h5p-lyric,.h5p-simple .h5p-time{display:none}.h5p-simple .h5p-info{position:absolute;top:0;left:40px;right:72px;line-height:34px;font-size:10px;overflow:hidden}.h5p-simple .h5p-info>*{margin:0 5px}.h5p-simple .h5p-control{position:absolute;top:0;right:5px;line-height:34px}.h5p-simple .h5p-control .h5p-button{display:inline-block;margin:0 5px;font-size:18px}.h5p-simple .h5p-artist,.h5p-simple .h5p-title{display:inline}.h5p-simple .h5p-progress{position:absolute;bottom:0;width:100%}"),function(){"use strict";function t(){this.data=[]}function e(e){var i=this;i.parent=e,i.events=new t,i.delegates=new t,i.handler=i._handler.bind(i),"ontouchstart"in window&&i.initTouch(),"onmousedown"in window&&i.initMouse()}function i(){this.data=[],this.last=0}function n(t){this.options=t,this.init(),o.push(this)}"undefined"==typeof Array.prototype.find&&(Array.prototype.find=function(t){for(var e=this,i=0;i<e.length;i++){var n=e[i];if(t(n,i,e))return n}}),t.prototype={getCallbacks:function(t,e,i,n){var o=this.data.find(function(e,i,n){return e.element===t});if(!o){if(!n)return;o={element:t,events:[{},{}]},this.data.push(o)}var a=o.events[i?1:0],r=a[e];return!r&&n&&(a[e]=r=[]),r},add:function(t,e,i,n){var o=this.getCallbacks(t,e,n,!0);o.push(i)},remove:function(t,e,i,n){var o=this.getCallbacks(t,e,n);if(o){var a=o.indexOf(i);a>=0&&o.splice(a,1)}},forEachEvent:function(t){this.data.forEach(function(e){function i(i,n){for(var o in i){var a=i[o];a.forEach(function(i){t(e.element,o,i,n)})}}i(e.events[0],!1),i(e.events[1],!0)})}},e.prototype={threshold:5,initTouch:function(){var t=this,e=t.handler;t.touches={},t.on(t.parent,"touchstart",e),t.on(t.parent,"touchmove",e),t.on(t.parent,"touchend",e)},initMouse:function(){var t=this,e=t.handler;t.mouse={},t.on(t.parent,"mousedown",e),t.on(t.parent,"mousemove",e),t.on(t.parent,"mouseup",e)},on:function(t,e,i,n){this.events.add(t,e,i,n),t.addEventListener(e,i,n)},off:function(t,e,i,n){this.events.remove(t,e,i,n),t.removeEventListener(e,i,n)},delegate:function(t,e,i,n){this.delegates.add(t,e,i,n)},undelegate:function(t,e,i,n){this.delegates.remove(t,e,i,n)},forEach:function(t,e){Array.prototype.forEach.call(t,e)},fire:function(t,e){for(var i=this,n=function(n){var o=i.delegates.getCallbacks(n,t);o&&i.forEach(o,function(i){var o,a={type:t};for(o in e)a[o]=e[o];a.preventDefault=r,a.stopPropagation=s,i.call(n,a)})},o=!1,a=!1,r=function(){o=!0},s=function(){a=!0},l=e.target;l&&(n(l),!a&&l!==i.parent);)l=l.parentNode;return o},_handler:function(t){var e=this,i=e.touches,n=e.mouse,o=!1;"touchstart"==t.type?e.forEach(t.changedTouches,function(t){i[t.identifier]={evt:t},o=e.fire("mousedown",t)||o}):"touchmove"==t.type?e.forEach(t.changedTouches,function(t){var n=i[t.identifier],a=n.evt;n.moved=n.moved||Math.abs(t.clientX-a.clientX)>e.threshold||Math.abs(t.clientY-a.clientY)>e.threshold,n.moved&&(n.evt=t,o=e.fire("mousemove",t)||o)}):"touchend"==t.type?e.forEach(t.changedTouches,function(t){o=e.fire("mouseup",t)||o;var n=i[t.identifier];delete i[t.identifier],n&&!n.moved&&(o=e.fire("click",t)||o)}):"mousedown"==t.type?(n.moving=!0,n.moved=!1,o=e.fire("mousedown",t)||o):"mousemove"==t.type?n.moving&&(n.moved=!0,o=e.fire("mousemove",t)||o):"mouseup"==t.type&&(n.moving=!1,o=e.fire("mouseup",t)||o,n.moved||(o=e.fire("click",t)||o)),o&&t.preventDefault()},getPoint:function(t){if("offsetX"in t)return{x:t.offsetX,y:t.offsetY};var e=t.target.getBoundingClientRect(),i=document.documentElement,n=window;return{x:t.pageX-(e.left+n.pageXOffset-i.clientLeft),y:t.pageY-(e.top+n.pageYOffset-i.clientTop)}},destroy:function(){var t=this;t.events.forEachEvent(function(t,e,i,n){t.removeEventListener(e,i,n)}),t.delegates=null,t.events=null}},i.prototype={setLyric:function(t){var e=this.data=[];if(this.last=0,t){var i=/^\[([^\]]*)\]\s*(.*)$/;t.split(/\n/).forEach(function(t){var n=t.match(i);if(n){var o=0;n[1].split(/:/).forEach(function(t){o=60*o+Number(t)}),e.push([o,n[2]])}})}},getLyricAtTime:function(t){var e,i=this,n=i.data,o=i.last,a=n[o]||n[o=0];if(a)if(a[0]<t){for(;(e=n[++o])&&e[0]<=t;)a=e;i.last=o-1}else{for(;a&&a[0]>t;)a=n[--o];i.last=o}return a?a[1]:""}};var o=[];n.prototype={_classes:{list:"fa fa-list",prev:"fa fa-step-backward",play:"fa fa-play",next:"fa fa-step-forward",pause:"fa fa-pause"},themes:["normal","simple"],extend:function(t,e){for(var i in e)t[i]=e[i];return t},init:function(){var t=this,e=t.options.container;t.classes=t.extend({},t._classes),t.options.classes&&t.extend(t.classes,t.options.classes),e.classList.add("h5p");var n=t.themes.indexOf(t.options.theme);0>n&&(n=0),e.classList.add("h5p-"+(t.theme=t.themes[n])),e.innerHTML='<div class="h5p-image"></div><div class="h5p-buttons"><i data="list" class="h5p-button '+t.classes.list+'"></i></div><div class="h5p-info"><div class="h5p-title"></div><div class="h5p-artist"></div></div><div class="h5p-control"><i data="prev" class="h5p-button '+t.classes.prev+'"></i><i data="play" class="h5p-button '+t.classes.play+'"></i><i data="next" class="h5p-button '+t.classes.next+'"></i></div><div class="h5p-progress"><div class="h5p-wrap"><div class="h5p-bar"><div class="h5p-played"></div></div><div class="h5p-cursor"></div><div class="h5p-time"></div></div></div><div class="h5p-lyric"></div><div class="h5p-playlist"></div>';var o=e.querySelector.bind(e);t.image=o(".h5p-image"),t.title=o(".h5p-title"),t.artist=o(".h5p-artist"),t.playlist=o(".h5p-playlist"),t.prwrap=o(".h5p-wrap"),t.prcur=o(".h5p-cursor"),t.prtime=o(".h5p-time"),t.brplayed=o(".h5p-played"),t.lyric=o(".h5p-lyric"),Array.prototype.forEach.call(e.querySelectorAll(".h5p-button"),function(e){t["bt"+e.getAttribute("data")]=e}),t.audio=new Audio,t.options.image&&(t.image.innerHTML='<img src="'+t.safeHTML(t.options.image)+'">'),t.setSongs([]),t.lyricParser=new i,t.bindEvents()},bindEvents:function(){var t=this,i=null,n=t.evtHandler=new e(t.options.container);n.delegate(t.btlist,"click",t.toggleList.bind(t)),n.delegate(t.btprev,"click",t.playPrev.bind(t)),n.delegate(t.btnext,"click",t.playNext.bind(t)),n.delegate(t.btplay,"click",t.togglePlay.bind(t)),n.on(t.audio,"ended",t.playAnother.bind(t)),n.on(t.audio,"timeupdate",function(e){var n=this.currentTime,o=t.duration;if(o||(o=t.duration=this.duration),!i){var a=o?n/o*100+"%":0;t.prcur.style.left=a,t.brplayed.style.width=a}t.prtime.innerHTML=t.timestr(n)+" / "+t.timestr(o),t.lyric.innerHTML=t.safeHTML(t.lyricParser.getLyricAtTime(n))});var a=function(e){var i=["play","pause"],n=0;"play"==e.type?o.forEach(function(e){e!==t&&e.audio.pause()}):n=1;var a=t.btplay.classList;t.classes[i[n]].split(/\s+/).forEach(function(t){a.remove(t)}),t.classes[i[1-n]].split(/\s+/).forEach(function(t){a.add(t)}),t.image.classList["play"==e.type?"add":"remove"]("h5p-roll")};n.on(t.audio,"play",a),n.on(t.audio,"pause",a),n.delegate(t.playlist,"click",function(e){e.preventDefault();var i=Array.prototype.indexOf.call(this.childNodes,e.target);i>=0&&t.play(i)});var r=function(e,i){var n=e/t.prwrap.offsetWidth;0>n?n=0:n>1&&(n=1),t.prcur.style.left=t.brplayed.style.width=100*n+"%",i&&(t.audio.currentTime=~~(n*t.duration))};n.delegate(t.prwrap,"click",function(t){t.preventDefault();var e=n.getPoint(t).x;r(e,!0)});var s=function(t){i&&(i.moved=!0,r(t.clientX-i.delta))},l=function(t){i&&(t.preventDefault(),i=null)},p=function(t){i&&(r(t.clientX-i.delta,!0),l(t))},c=function(e){e.preventDefault(),i={delta:e.clientX-t.brplayed.offsetWidth}};n.delegate(t.prcur,"mousedown",c),n.delegate(t.options.container,"mousemove",s),n.delegate(t.options.container,"mouseup",p),n.on(t.options.container,"mouseleave",l)},safeHTML:function(t){return t.replace(/[&"<]/g,function(t){return{"&":"&amp;",'"':"&quot;","<":"&lt;"}[t]})},toggleList:function(t){t.preventDefault();var e=this;e.btlist.classList.toggle("h5p-active");var i=e.playlist.style.display;e.playlist.style.display=i?"":"block"},togglePlay:function(t){t.preventDefault();var e=this;e.current<0?e.play(0):e.audio.paused?e.audio.play():e.audio.pause()},playPrev:function(t){t&&t.preventDefault(),this.play(this.previous())},playNext:function(t){t&&t.preventDefault(),this.play(this.next())},playAnother:function(){this.playNext()},setSongs:function(t){var e=this,i=[];e.songs=t,e.songs.forEach(function(t){var n=e.safeHTML(t.name);i.push('<div title="'+n+'">'+n+"</div>")}),e.playlist.innerHTML=i.join(""),e.current=-1,e.audio.src="",e.duration=0,e.showInfo(e.songs[0])},showInfo:function(t){var e,i=this;t=t||{},"simple"==i.theme&&(e=t.smallimage||i.options.smallimage),e=e||t.image||i.options.image||"",e&&(i.image.innerHTML='<img src="'+i.safeHTML(e)+'">'),i.title.innerHTML=i.safeHTML(t.name||""),i.artist.innerHTML=i.safeHTML(t.artist||"")},getLyric:function(t){var e=this,i=e.songs[e.current];if("lyric"in i)e.lyricParser.setLyric(i.lyric);else if(e.lyricParser.setLyric(),"lyricjsonp"in i){var n,o="setLyric"+Date.now().toString(16)+(~~(65535*Math.random())).toString(16);window[o]=function(t){200!=t.code?i.lyric=null:(i.lyric=t.lyric,i===e.songs[e.current]&&e.lyricParser.setLyric(i.lyric)),delete window[o],n&&(clearTimeout(n),n=null)};var a=document.createElement("script");a.src=i.lyricjsonp+(/\?/.test(i.lyricjsonp)?"&":"?")+"jsonp="+o,a.onload=function(){document.body.removeChild(a)},document.body.appendChild(a),t&&(n=setTimeout(function(){delete window[o],n=null},t))}},play:function(t){var e=this;if(t>=0&&t<e.songs.length){if(e.current==t)e.audio.currentTime=0;else{var i=e.playlist.childNodes,n=i[e.current];n&&n.classList.remove("h5p-active"),e.current=t,i[e.current].classList.add("h5p-active");var o=e.songs[e.current];e.audio.src=o.url,e.duration=o.duration?o.duration/1e3:null,e.showInfo(o),"simple"!=e.theme&&(e.lyric.innerHTML="",e.getLyric(1e4))}e.prtime.innerHTML="",e.prcur.style.left=0,e.brplayed.style.width=0,e.audio.play()}},previous:function(){return(this.current+this.songs.length-1)%this.songs.length},next:function(){return(this.current+1)%this.songs.length},timestr:function(t){if(isNaN(t))return"??:??";var e=Math.floor(t/60);return t=Math.floor(t)%60,10>t&&(t="0"+t),10>e&&(e="0"+e),e+":"+t},destroy:function(){var t=this;t.evtHandler.destroy(),t.evtHandler=null,t.lyricParser=null,t.audio.src="",t.audio=null,t.options.container.innerHTML="",t.options.container.classList.remove("h5p");var e=o.indexOf(this);e>=0&&o.splice(e,1)}},window.Player=n}.call({});